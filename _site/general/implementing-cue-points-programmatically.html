---
title: 프로그래밍 방식으로 큐 포인트 구현
parent: General Information
description: In this topic, you will gain an understanding of cue points with Brightcove Player. You will then see how to programmatically create cue points and handle when a cue point is dispatched. ---
<article class="bcls-article">
  <h1>프로그래밍 방식으로 큐 포인트 구현</h1>
  <summary>{{ page.description }}</summary>
  <style type="text/css">
.비디오-js { width: 640px; height: 360px; }
</style>
  <section class="bcls-section">
    <h2 id="Overview">개요</h2>
    <p>비디오에 큐 포인트를 설정할 수 있습니다. 비디오 재생 중에 각 큐 포인트에 도달하면 이벤트가 전달됩니다.</p>
    <div class="video-cloud-only">
      <p>다음 비디오를 재생하여 플레이어가 프리 롤, 미드 롤 (5 초, 10 초, 12 초) 및 포스트 롤 시간에 큐 포인트 정보를 표시하는지 확인합니다.</p>
      <video-js id="myPlayerID" data-video-id="4740963811001" data-account="1752604059001" data-player="VkIrj2aFx" data-embed="default" class="video-js" controls="">&nbsp;</video-js>
      <p>******** 큐 포인트 정보********</p>
      <p id="insertionPoint">&nbsp;</p>
      <p>****** 엔드 큐 포인트 정보******</p>
      <aside class="bcls-aside bcls-aside--information">참고: NS <strong> ID</strong>변수는 Video Cloud에 할당되지 않았기 때문에 연결된 값이 없습니다.</aside>
    </div>
    <div class="player-only">
      <p>이 비디오를 재생하면 플레이어 아래에 4 개의 큐 포인트에 대한 정보가 표시됩니다.</p>
      <video-js id="myPlayerID3" data-account="3676484087001" data-player="4f14e962-a11f-441f-8c00-0c89b8edb0a6" data-embed="default" class="video-js" controls="">&nbsp;</video-js>
      <p id="insertionPoint3">&nbsp;</p>
    </div>
  </section>
  <section class="bcls-section">
    <h2 id="Key_concepts">주요 컨셉</h2>
    <p><span class="video-cloud-only">Brightcove Player에서 큐 포인트를 효과적으로 사용하려면 몇 가지 개념을 이해해야합니다. 이러한 개념은 문서의이 섹션에서 설명합니다.</span><span class="player-only"> Brightcove Player에서 큐 포인트를 효과적으로 사용하려면 다음 개념을 이해해야합니다.</span></p>
    <div class="video-cloud-only">
      <h3>Video Cloud 카탈로그 큐 포인트</h3>
      <p>이해해야 할 첫 번째 개념은 용어와 관련이 있습니다. Brightcove Player에서 큐 포인트는 HTML 표준에 따라 텍스트 트랙 요소로 저장됩니다. 즉, Video Cloud 비디오를 사용할 때 "Video Cloud 스타일"큐 포인트가 텍스트 트랙으로 변환됩니다.</p>
      <p>이러한 "Video Cloud 스타일"큐 포인트는 Video Cloud 카탈로그에서 읽어 오기 때문에 "카탈로그"큐 포인트라고도합니다. <a href="/references/player-catalog.html">플레이어 카탈로그</a>카탈로그에 대한 자세한 내용은 문서). 이 변환이 발생하면 유형 및 큐 포인트 시간과 같은 카탈로그 큐 포인트의 일부 정보가 텍스트 트랙으로 변환됩니다.</p>
      <h3>카탈로그 큐 포인트 구조</h3>
      <p>이해해야 할 다음 개념은 구조에서 카탈로그 큐 포인트와 HTML 표준 사이에 상당한 차이가 있다는 것입니다. 차이점은 HTML 큐 포인트가 지속 시간을 가질 수 있다는 것입니다. 즉, 모든 큐 포인트에 대해 두 개의 큐 포인트 변경 이벤트가 전달됩니다. 하나는 큐 포인트의 시작과 끝에서 하나입니다.</p>
      <p>변환 프로세스에서 모든 카탈로그 큐 포인트는 시작 및 중지 시간이 동일한 큐 포인트로 변환됩니다. 즉, 모든 카탈로그 큐 포인트에 대해 두 개의 큐 포인트 이벤트가 전달되고 코드에서 설명되어야합니다.</p>
    </div>
    <h3><code translate="No">activecues</code>정렬</h3>
    <p><span class="video-cloud-only">다른</span><span class="player-only">안</span> HTML 큐 포인트를 다룰 때 이해해야 할 중요한 개념적 포인트는<code translate="No">activeCues</code>정렬. 모든 큐 포인트는 배열에 정의됩니다. 다른 배열이 있습니다. <code translate="No">activeCues</code> , "활성"인 큐 포인트를 보유합니다. 이는 재생 시간이 큐 포인트의 시작 및 중지 시간 사이임을 의미합니다.</p>
    <p>카탈로그 큐 포인트를 사용하는 경우 시작 및 중지 시간이 동일하므로 정의 된 두 번째에 대해서만 활성화됩니다. 또한 카탈로그 큐 포인트를 사용하면 두 개의 큐 포인트가 겹치지 않기 때문에 동시에 활성화 될 가능성이 거의 없습니다.</p>
    <aside class="bcls-aside bcls-aside--information">참고: 예를 들어 하나는 큐 포인트 용으로, 다른 하나는 비디오 캡션 용으로 여러 세트의 텍스트 트랙이있을 수 있습니다. 이 문서의 예제 코드에서 큐 포인트 텍스트 트랙은 TextTracks 배열의 첫 번째 요소와 두 번째 요소 모두에 있습니다. 이것이 코드에 반영된 것을 볼 수 있습니다.</aside>
    <h3>큐 포인트 유형</h3>
    <p>이 문서에서는<code translate="No">type</code>속성에 값이 할당되었습니다. 이러한 유형 값은 Studio 사용자 인터페이스에서 큐 포인트를 만들 때 할당됩니다. 두 가지 유형의 큐 포인트가 있지만 둘 다 단순히 문자열 값을<code translate="No">type</code>특성. 적절한 값은 큐 포인트 정보를 처리하는 동안 사용자 정의 JavaScript에서 사용되는 경우에만 유용합니다.  유형은 여기에 자세히 설명되어 있습니다.</p>
    <ul>
      <li><strong>기원 후</strong> -문자열 값을 할당합니다. <code translate="No">AD</code> ~로<code translate="No">type</code>특성</li>
      <li><strong>암호</strong> -문자열 값을 할당합니다. <code translate="No">CODE</code> ~로<code translate="No">type</code>특성</li>
    </ul>
  </section>
  <section class="bcls-section video-cloud-only">
    <h2 id="Video_Cloud_cue_points">Video Cloud 큐 포인트</h2>
    <p>문서의이 섹션에서는 카탈로그 큐 포인트를 설정하고 카탈로그 큐 포인트 이벤트 디스패치를 수신하는 방법을 배웁니다.</p>
    <h3>Video Cloud 큐 포인트 설정</h3>
    <p>Video Cloud 큐 포인트는 Video Cloud Studio 및이 문서에 자세히 설명 된 여러 다른 방법을 사용하여 비디오와 연결할 수 있습니다. <a href="https://studio.support.brightcove.com/media/working-cue-points-media-module.html">미디어 모듈에서 큐 포인트 작업</a> .</p>
    <h3>Video Cloud 큐 포인트에서 작동-비디오가 플레이어에 정적으로 바인딩 됨</h3>
    <p>문서의이 섹션에서는 동영상이 플레이어에 정적으로 바인딩되어있을 때 카탈로그 큐 포인트를 처리하는 방법을 알아 봅니다. 즉, Studio에서 또는 플레이어 관리 API를 직접 사용하여 동영상이 플레이어에로드되었음을 의미합니다.</p>
    <p>큐 포인트가로드되기 전에 처리하려는 경합 상태를 방지하려면 다음을 사용해야합니다. <code translate="No">loadedmetadata</code>큐 포인트를 처리하기 전에 전달되는 이벤트입니다. 적절한 텍스트 트랙을 읽은 후에는<code translate="No">oncuechange</code>전달 될 큐 포인트 이벤트를 수신하는 이벤트입니다.</p>
    <p>다음 코드는 큐 포인트를 수신하고 큐 포인트의 데이터를 표시하는 방법을 보여줍니다. 이 예제에서 비디오는 플레이어에 정적으로 바인딩되어 있습니다.</p>
    <ul>
      <li>24번 라인: 동적으로 생성된 HTML을 삽입할 위치로 단락 요소를 만듭니다.</li>
      <li>31,43 행 : 사용<code translate="No">one()</code>이벤트 리스너를 추가하는 메소드<code translate="No">loadedmetadata</code>한 번만 이벤트. 이벤트 핸들러 함수는 익명으로 정의됩니다.</li>
      <li>32 행 : <code translate="No">textTracks()</code>메서드를 사용하여 TextTrack 배열을 검색한 다음 큐 포인트를 보유하는 0번째 요소를 변수에<code translate="No">tt</code>할당합니다. 일부 구현에서는 큐 포인트가 다른 배열 요소에 있을 수 있다는 점에 유의하십시오. 자세한 내용은 아래의 올바른 트랙<a href="#findtrack">찾기</a>섹션을 참조하십시오.</li>
      <li>33,41 행 : 이벤트가 전달될 때의<code translate="No">oncuechange</code>이벤트 핸들러 함수를 설정합니다.</li>
      <li>34 행 : 첫 번째 (0 번째 배열 요소) 큐 포인트 디스패치를 받고 있는지 확인합니다. 이 조건이 없으면 각 큐 포인트가 두 번 작동하는 것을 볼 수 있습니다. 기간이 겹치는 큐 포인트를 사용하는 경우 이 조건이 달라야 합니다.</li>
      <li>35-39 행 : 큐 포인트의 정보를 사용하여 동적으로 HTML을 만들고 HTML 페이지에 삽입합니다.</li>
      <li>42호선: 비디오를 재생합니다.</li>
    </ul>
    <pre class="line-numbers" data-start="17">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
data-account="1507807800001"
data-player="6aac508a-741e-41a2-bc7a-5805644cf089"
data-embed="default"
data-video-id="1507781667001"
class="video-js" controls&gt;&lt;/video-js&gt;

&lt;p id="insertionPoint"&gt;&lt;/p&gt;
&lt;script src="https://players.brightcove.net/1507807800001/6aac508a-741e-41a2-bc7a-5805644cf089_default/index.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var player = this;
    player.one("loadedmetadata", function () {
      var tt = player.textTracks()[0];
      tt.oncuechange = function () {
        if (tt.activeCues[0] !== undefined) {
          var dynamicHTML = "id: " + tt.activeCues[0].id + ", ";
          dynamicHTML += "text: " + tt.activeCues[0].text + ", ";
          dynamicHTML += "startTime: " + tt.activeCues[0].startTime + ",  ";
          dynamicHTML += "endTime: " + tt.activeCues[0].endTime;
          document.getElementById("insertionPoint").innerHTML += dynamicHTML + "&lt;br/&gt;";
        }
      }
      player.play();
    });
  });
&lt;/script&gt;</code></pre>
    <h3>Video Cloud 큐 포인트에 대한 작업-플레이어에서 동적으로 비디오로드</h3>
    <p>이 문서 섹션에서는 비디오가 플레이어에 동적으로로드 될 때 카탈로그 큐 포인트를 처리하는 방법을<code translate="No">catalog.getVideo()</code>과<code translate="No">catalog.load()</code>행동 양식.</p>
    <p>플레이어 카탈로그를 사용하여 비디오를 가져오고로드 할 때 큐 포인트를 처리하는 것이 정적으로 바인딩 된 비디오를 사용할 때보 다 조금 더 쉽습니다. <code translate="No">loadedmetadata</code>행사.</p>
    <ul>
      <li>76 행 : 동적으로 생성된 HTML을 삽입할 위치로 단락 요소를 만듭니다.</li>
      <li>83,97 행 : 사용<code translate="No">catalog.getVideo()</code>비디오를 검색하는 방법. 콜백 함수는 여기서 익명으로 정의됩니다.</li>
      <li>85번 라인: 사용<code translate="No">catalog.load()</code>플레이어에 비디오를로드하는 메서드입니다.</li>
      <li>86 행 : <code translate="No">textTracks()</code>메서드를 사용하여 TextTrack 배열을 검색한 다음 큐 포인트를 보유하는 0번째 요소를 변수에<code translate="No">tt</code>할당합니다. 일부 구현에서는 큐 포인트가 다른 배열 요소에 있을 수 있다는 점에 유의하십시오. 자세한 내용은 아래의 올바른 트랙<a href="#findtrack">찾기</a>섹션을 참조하십시오.</li>
      <li>87,95 행 : 이벤트가 전달될 때의<code translate="No">oncuechange</code>이벤트 핸들러 함수를 설정합니다.</li>
      <li>88 행 : 첫 번째 (0 번째 배열 요소) 큐 포인트가 정의되어 있는지 확인하십시오. 이 조건이 없으면 각 큐 포인트가 두 번 작동하고 두 번째에는 정의 된 요소가 없음을 알 수 있습니다. <code translate="No">activecues</code>배열 (두 번째 큐 변경은 큐 포인트 끝을위한 것이므로). 기간이 겹치는 큐 포인트를 사용하는 경우 이 조건이 달라야 합니다.</li>
      <li>89-93 행 : 큐 포인트의 정보를 사용하여 동적으로 HTML을 만들고 HTML 페이지에 삽입합니다.</li>
      <li>96 행 : 비디오를 재생합니다.</li>
    </ul>
    <pre class="line-numbers" data-start="69">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
  data-account="1507807800001"
  data-player="3c59134e-89e8-4864-87e2-3cc871f8c361"
  data-embed="default"
  data-video-id=""
  class="video-js" controls&gt;&lt;/video-js&gt;

  &lt;p id="insertionPoint"&gt;&lt;/p&gt;

  &lt;script src="https://players.brightcove.net/1507807800001/3c59134e-89e8-4864-87e2-3cc871f8c361_default/index.min.js"&gt;&lt;/script&gt;

  &lt;script&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var player = this;
    player.catalog.getVideo('1507781667001', function (error, video) {
      //deal with error
      player.catalog.load(video);
      player.one("loadedmetadata", function () {
        var tt = player.textTracks()[0];
        tt.oncuechange = function () {
          if (tt.activeCues[0] !== undefined) {
            var dynamicHTML = "id: " + tt.activeCues[0].id + ", ";
            dynamicHTML += "text: " + tt.activeCues[0].text + ", ";
            dynamicHTML += "startTime: " + tt.activeCues[0].startTime + ",  ";
            dynamicHTML += "endTime: " + tt.activeCues[0].endTime;
            document.getElementById("insertionPoint").innerHTML += dynamicHTML + "&lt;br/&gt;";
          }
        }
      });
      player.play();
    });
  });
&lt;/script&gt;</code></pre>
    <h3 id="allvcinfo">모든 Video Cloud 큐 포인트 정보 검색</h3>
    <p>모든 Video Cloud 큐 포인트 정보를 직접 사용할 수있는 것은 아닙니다. <code translate="No">activecues</code>정렬. 이 문제는 다음에서 원하는 정보를 검색하여 쉽게 해결할 수 있습니다. <code translate="No">mediainfo</code>특성.</p>
    <p>이 솔루션의 기본 접근 방식은 다음과 같습니다.</p>
    <ol>
      <li>기다려<code translate="No">loadstart</code>이벤트<code translate="No">mediainfo</code>채워질 속성입니다.</li>
      <li>할당<code translate="No">cue_points</code>배열에서<code translate="No">mediainfo</code>속성을 변수에 추가합니다. 이 변수는 완전한 Video Cloud 큐 포인트 정보를 포함합니다.</li>
      <li>큐 포인트 이벤트에서 해당 큐 포인트 데이터를 검색합니다. <code translate="No">time</code>자산 가치. 이것은 객체의 속성 값을 기반으로 배열에서 객체를 가져 오는 도우미 함수를 사용하여 수행됩니다.</li>
      <li>큐 포인트의 데이터를 사용합니다.</li>
    </ol>
    <p>다음 이미지는 전체 큐 포인트 배열 (왼쪽 위), 단일 큐 포인트 데이터 컬렉션 (오른쪽 위) 및 해당 단일 큐 포인트 데이터 컬렉션의 하나의 속성 (오른쪽 아래)을 보여줍니다.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="cue point data" src="/assets/images/general/cue-point-all-vc-data.png" /></figure>
    <p>아래 스 니펫에서는 위의 예제에서 새로 추가되거나 변경된 코드 만 설명합니다.</p>
    <ul>
      <li>452-463 행 : 모든 큐 포인트의 배열에서 단일 큐 포인트 데이터 컬렉션을 추출하는 데 사용할 함수를 포함합니다. 모든 큐 포인트의 배열, 특정 값을 검색하는 속성 및 마지막으로 검색중인 값을 전달합니다.</li>
      <li>432 행 : <code translate="No">loadstart</code>이벤트를 수신합니다. 동영상이로드되기 시작하면<code translate="No">mediainfo</code>속성이 채워집니다.</li>
      <li>434 행 : 모든 Video Cloud 큐 포인트의 배열을 변수에 할당합니다.</li>
      <li>443 행 : 큐 포인트 디스패치 이벤트 핸들러에서 특정 큐 포인트의 데이터 컬렉션을 변수에 할당합니다. 첫 번째 글 머리 기호에서 언급 한 함수가 호출되는 곳입니다. 사용되는 인수는 다음과 같습니다.
        <ul>
          <li><code translate="No">cuePointAra</code>: Video Cloud 큐 포인트의 전체 컬렉션입니다.</li>
          <li><code translate="No">'time'</code>: 값을 검색 할 속성입니다.</li>
          <li><code translate="No">tt.activeCues[0].startTime</code>: 큐 포인트 디스패치 이벤트 핸들러에서 현재 처리중인 큐 포인트의 시작 시간입니다.</li>
        </ul>
      </li>
      <li>444-445 행 : 디버깅<code translate="No">console.log()</code>프로덕션 코드에서 제거해야하는 메서드 호출.</li>
    </ul>
    <pre class="line-numbers" data-start="426">
<code class="language-html" translate="No">&lt;script&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var myPlayer = this,
      cuePointAra = [],
      allCuePointData;
    myPlayer.on('loadstart', function () {
      //console.log('mediainfo', myPlayer.mediainfo);
      cuePointAra = myPlayer.mediainfo.cue_points;
      var tt = myPlayer.textTracks()[0];
      tt.oncuechange = function () {
        if (tt.activeCues[0] !== undefined) {
          var dynamicHTML = "id: " + tt.activeCues[0].id + ", ";
          dynamicHTML += "text: " + tt.activeCues[0].text + ", ";
          dynamicHTML += "startTime: " + tt.activeCues[0].startTime + ",  ";
          dynamicHTML += "endTime: " + tt.activeCues[0].endTime;
          document.getElementById("insertionPoint").innerHTML += dynamicHTML + "&lt;br/&gt;";
          allCuePointData = getSubArray(cuePointAra, 'time', tt.activeCues[0].startTime);
          console.log('cue point data:', allCuePointData);
          console.log('cue point metadata:', allCuePointData[0].metadata);
        }
      }
      myPlayer.play();
      myPlayer.muted(true);
    });

    function getSubArray(targetArray, objProperty, value) {
      var i, totalItems = targetArray.length,
        objFound = false,
        idxArr = [];
      for (i = 0; i &lt; totalItems; i++) {
        if (targetArray[i][objProperty] === value) {
          objFound = true;
          idxArr.push(targetArray[i]);
        }
      }
      return idxArr;
    };
  });
&lt;/script&gt;</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="HTML5_standard_cue_points">HTML5 표준 큐 포인트</h2>
    <p>HTML5 표준 큐 포인트는 규정 된 형식의 트랙 요소로 저장됩니다. 다음 HTML5 Rocks 튜토리얼에서 좋은 입문 콘텐츠를 찾을 수 있습니다. <a href="//www.html5rocks.com/en/tutorials/track/basics/">트랙 요소 시작하기</a> . 문서의이 섹션에서는 WebVTT 큐 포인트 파일의 형식과 이러한 큐 포인트를 처리하는 방법을 배웁니다.</p>
    <h3>큐 포인트 용 WebVTT 파일 형식</h3>
    <p>WebVTT 파일 형식은 엄격하게 정의됩니다. 큐 포인트의 경우 파일은 다음과 같이 구성됩니다.</p>
    <ul>
      <li>문자열<strong> WebVTT</strong>파일의 첫 번째 줄로</li>
      <li>빈 줄 한 개</li>
      <li>특정 큐 포인트의 식별자</li>
      <li>양식의 기간<strong> 00 : 00 : 00.000-&gt; 00 : 00 : 00.000</strong> ; 이것은 시간 : 분 : 초. 밀리 초 형식이며 엄격하게 구문 분석됩니다. 필요한 경우 숫자는 0으로 채워야합니다.</li>
      <li>다음 빈 줄까지 지속 시간 뒤에 오는 문자는<strong>본문</strong>값; 여기에 여러 개의 서로 다른 값을 저장하려는 경우 JSON이 잘 작동하며 쉽게 구문 분석 할 수 있습니다.</li>
      <li>빈 줄 한 개</li>
      <li>식별자 / 기간 / 텍스트 / 빈 줄 형식을 사용하여 여러 큐 포인트를 추가 할 수 있습니다.</li>
    </ul>
    <aside class="bcls-aside bcls-aside--tip">참고: 다음을 사용하여 WebVTT 형식을 확인할 수 있습니다. <a href="//quuz.org/webvtt/">검증인</a> .</aside>
    <p>다음은 두 개의 큐 포인트를 정의하는 유효한 WebVTT 큐 포인트 문서입니다. 하나는 지속 시간이 2 ~ 5 초이고 다른 하나는 지속 시간이 10 ~ 15 초입니다.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">WEBVTT

multiCell
00:00:02.000 --&gt; 00:00:05.000
{
"title": "Multi-celled organisms",
"description": "Multi-celled organisms have different types of cells that perform specialized functions.",
"src": "multiCell.jpg",
"href": "http://en.wikipedia.org/wiki/Multicellular"
}

insects
00:00:10.000 --&gt; 00:00:15.000
{
"title": "Insects",
"description": "Insects are the most diverse group of animals on the planet with estimates for the total number of current species range from two million to 50 million. The first insects appeared around 400 million years ago, identifiable by a hard exoskeleton, three-part body, six legs, compound eyes and antennae.",
"src": "insects.jpg",
"href": "http://en.wikipedia.org/wiki/Insects"
}</code></pre>
    <p>다음 비디오를 재생하면 위에 표시된 큐 포인트 WebVTT 파일이 처리 된 것을 볼 수 있습니다. 큐 포인트가 시작될 때 동적으로 생성 된 HTML이 페이지에 삽입 된 다음<strong>본문</strong>들. 큐 포인트의 끝에서 메시지<strong>큐 포인트 지속 시간</strong>가 표시됩니다.</p>
    <video-js id="myPlayerID2" data-video-id="4607357817001" data-account="1752604059001" data-player="VkIrj2aFx" data-embed="default" class="video-js" controls="">
      <track kind="metadata" src="https://solutions.brightcove.com/bcls/tests/player/cuepoints.vtt" />
    </video-js>
    <p>******** 큐 포인트 정보********</p>
    <p id="insertionPoint2">&nbsp;</p>
    <p>****** 엔드 큐 포인트 정보******</p>
    <h3>큐 포인트 개요 처리</h3>
    <p>HTML5 표준 큐 포인트를 사용하는 기본 단계는 다음과 같습니다.</p>
    <ol>
      <li>큐 포인트가 포함 된 WebVTT 파일에서<code translate="No">&lt;track&gt;</code>의 자식으로 중첩 된 태그<code translate="No">&lt;video-js&gt;</code>꼬리표.</li>
      <li>안에<code translate="No">loadedmetadata</code>이벤트 핸들러, 적절한 텍스트 트랙 요소를 검색합니다.</li>
      <li>동일한 이벤트 처리기에서 두 번째 이벤트 처리기를 구성합니다. <code translate="No">oncuechange</code>큐 포인트 이벤트.</li>
      <li>에서<code translate="No">oncuechange</code>이벤트 핸들러, <code translate="No">activecues</code>배열 객체에 정의 된 0 번째 요소가 있습니다. 예인 경우 큐 포인트 시작에 작동합니다. <aside class="bcls-aside bcls-aside--information">참고: 당신은 할 것<code translate="No">oncuechange</code>큐 포인트가 시작되고 중지 될 때 전달되는 이벤트입니다. 그만큼<code translate="No">activecues</code>배열은 큐 포인트 기간 동안 만 값을 갖습니다. 따라서 만약<code translate="No">oncuechange</code>이벤트가 발생하고 정의된 개체가 없습니다. <code translate="No">activecues</code>배열에서 전달된 이벤트는 큐 포인트 중지를 위한 것임을 알 수 있습니다.</aside>
      </li>
      <li>에서<code translate="No">oncuechange</code>이벤트 핸들러, <code translate="No">activecues</code>배열 객체에는 0 번째 요소가 정의되어 있습니다. 그렇지 않은 경우 큐 포인트 중지에 작동합니다.</li>
    </ol>
    <aside class="bcls-aside bcls-aside--information">참고: 큐 포인트의 지속 시간이 겹치는 경우 위 단계의 논리를 약간 변경해야 합니다.</aside>
    <div class="video-cloud-only">
      <h3>프로세스 큐 포인트 코드</h3>
      <p>&nbsp;</p>
      <ul>
        <li>122 행 : <code translate="No">&lt;track&gt;</code>태그를 사용하여 WebVTT 파일을 읽고 텍스트 트랙을 만듭니다.</li>
        <li>126 행 : 동적으로 생성된 HTML을 삽입할 위치로 단락 요소를 만듭니다.</li>
        <li>134,152 행 : 이<code translate="No">one()</code>메서드를 사용하여<code translate="No">loadedmetadata</code>이벤트에 대해 한 번만 수신합니다. 이벤트 핸들러 함수는 익명으로 정의됩니다.</li>
        <li>135 행 : 마지막으로 로드한 텍스트 트랙의 인덱스를 변수에 할당합니다.</li>
        <li>136호선: 이전 단계에서 결정된 인덱스를 사용하여 배열의 마지막 요소를 변수에 할당하는<code translate="No">textTracks()</code>메서드를 사용하여 TextTrack 배열을 검색합니다. 이 로직에 대한 변형은 아래의 올바른 트랙<a href="#findtrack">찾기</a>섹션을 참조하십시오.</li>
        <li>137,149 행 : 이벤트가 전달될 때의<code translate="No">oncuechange</code>이벤트 핸들러 함수를 설정합니다.</li>
        <li>138 행 : 첫 번째 (0번째 배열 요소) 큐 포인트가 ActiveCues 배열에 정의되어 있는지 확인합니다. 이렇게 하면 시작 큐 포인트 이벤트임을 알 수 있습니다.</li>
        <li>139-145 행 : 큐 포인트의 정보를 사용하여 동적으로 HTML을 만들고 HTML 페이지에 삽입합니다. 여기에는 JSON을 구문 분석하고 해당 JSON의 다양한 필드 표시가 포함됩니다.</li>
        <li>146-147 행 : 큐 포인트 끝에 도달했다는 메모를 표시합니다.</li>
        <li>150 행 : 비디오를 재생합니다.</li>
      </ul>
      <pre class="line-numbers" data-start="115">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID2"
  data-account="1752604059001"
  data-player="8cfb6785-c4be-43b4-af68-7ca2fe3a6ebf"
  data-embed="default"
  data-video-id="3851380732001"
  class="video-js" controls&gt;

  &lt;track kind="metadata" src="https://solutions.brightcove.com/bcls/tests/player/cuepoints.vtt" /&gt;
&lt;/video-js&gt;

&lt;p id="insertionPoint2"&gt;&lt;/p&gt;

&lt;script src="https://players.brightcove.net/1752604059001/8cfb6785-c4be-43b4-af68-7ca2fe3a6ebf_default/index.min.js"&gt;&lt;/script&gt;

&lt;script type="text/javascript"&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var myPlayer = this;
    myPlayer.one("loadedmetadata", function () {
      var trackIndex = myPlayer.textTracks().length - 1;
      var tt = myPlayer.textTracks()[trackIndex];
      tt.oncuechange = function () {
        if (tt.activeCues[0] !== undefined) {
          var dynamicHTML = "id: " + tt.activeCues[0].id + ", ";
          dynamicHTML += "text: " + tt.activeCues[0].text + ", ";
          dynamicHTML += "startTime: " + tt.activeCues[0].startTime + ",  ";
          dynamicHTML += "endTime: " + tt.activeCues[0].endTime;
          document.getElementById("insertionPoint2").innerHTML += dynamicHTML + "&lt;br/&gt;&lt;br/&gt;";
          jsonData = JSON.parse(tt.activeCues[0].text);
          document.getElementById("insertionPoint2").innerHTML += jsonData.title + ": " + jsonData.description + "&lt;br/&gt;&lt;br/&gt;";
        } else {
          document.getElementById("insertionPoint2").innerHTML += "Cue point duration over" + "&lt;br/&gt;&lt;br/&gt;";
        }
      } //end oncuechange
      myPlayer.play();
      myPlayer.muted(true);
    }); //end loadedmetadata
  }); //end ready
&lt;/script&gt;</code></pre>
    </div>
    <div class="player-only">
      <h3>프로세스 큐 포인트 코드</h3>
      <p>&nbsp;</p>
      <ul>
        <li>270 행 : <code translate="No">&lt;track&gt;</code>태그를 사용하여 WebVTT 파일을 읽고 텍스트 트랙을 만듭니다.</li>
        <li>273 행 : 동적으로 생성된 HTML을 삽입할 위치로 단락 요소를 만듭니다.</li>
        <li>285,309 행 : 이<code translate="No">one()</code>메서드를 사용하여<code translate="No">loadedmetadata</code>이벤트에 대해 한 번만 수신합니다. 이벤트 핸들러 함수는 익명으로 정의됩니다.</li>
        <li>286 행 : 마지막으로 로드한 텍스트 트랙의 인덱스를 변수에 할당합니다.</li>
        <li>287 행 : 이전 단계에서 결정된 인덱스를 사용하여 배열의 마지막 요소를 변수에 할당하는<code translate="No">textTracks()</code>메서드를 사용하여 TextTrack 배열을 검색합니다. 이 로직에 대한 변형은 아래의 올바른 트랙<a href="#findtrack">찾기</a>섹션을 참조하십시오.</li>
        <li>289,301 행 : 이벤트가 전달될 때의<code translate="No">oncuechange</code>이벤트 핸들러 함수를 설정합니다.</li>
        <li>290 행 : 첫 번째 (0번째 배열 요소) 큐 포인트가 ActiveCues 배열에 정의되어 있는지 확인합니다. 이렇게 하면 시작 큐 포인트 이벤트임을 알 수 있습니다.</li>
        <li>291-294 행 : 큐 포인트의 정보를 사용하여 동적으로 HTML을 만들고 HTML 페이지에 삽입합니다. 여기에는 JSON을 구문 분석하고 해당 JSON의 다양한 필드 표시가 포함됩니다.</li>
        <li>295-297 행 : 큐 포인트 끝에 도달했다는 메모를 표시합니다.</li>
        <li>302호선: 비디오를 재생합니다.</li>
      </ul>
      <p>&nbsp;</p>
    </div>
    <p>WebVTT 파일을 프로그래밍 방식으로 추가 할 수 있다고 가정 할 수 있습니다. <code translate="No">addRemoteTextTrack()</code>방법. 이 경우 큐 포인트를 사용하기 전에 처리 할 준비가되지 않은 경쟁 조건을 경험할 수 있으므로 신뢰할 수 없습니다. WebVTT 파일을 추가하는 것은 안전합니다. <code translate="No">&lt;track&gt;</code>표시된대로 태그.</p>
  </section>
  <section class="bcls-section">
    <h2 id="findtrack">올바른 트랙 찾기</h2>
    <p>이 문서의 여러 위치에서 여러 텍스트 트랙이 플레이어와 연결된 경우 가능한 문제가 발생할 수 있습니다. 플레이어와 하나의 텍스트 트랙 만 연결되어 있다고 가정했기 때문에 다음 코드가 사용되었습니다. <code translate="No">var tt = myPlayer.textTracks()[0];</code> . 0 번째 배열 요소를 선택하면 플레이어와 관련된 단일 텍스트 트랙이 있다고 가정합니다.</p>
    <p>텍스트 트랙은 큐 포인트뿐만 아니라 다른 종류의 데이터에도 사용됩니다. 그만큼<strong>종류</strong>속성은 다음 값을 포함 할 수 있습니다.</p>
    <ul>
      <li>자막</li>
      <li>캡션</li>
      <li>설명</li>
      <li>장</li>
      <li>메타데이터</li>
    </ul>
    <p>즉, 여러 텍스트 트랙이 플레이어와 연결될 수 있으며 애플리케이션 논리에 맞는 올바른 트랙을 찾을 수있는 방법이 필요합니다. 다음 코드는 사용 가능한 텍스트 트랙을 반복합니다. <strong>메타 데이터</strong> (큐 포인트) 값을 찾았습니다.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  videojs.getPlayer('myPlayerID').ready(function() {
    var myPlayer = this,
      allTextTacks,
      attLength,
      tt;
    myPlayer.one("loadedmetadata", function () {
      allTextTacks = myPlayer.textTracks();
      attLength = allTextTacks.length;
      for (var i = 0; i &lt; attLength; i++) {
        if (allTextTacks[i].kind === 'metadata') {
          tt = allTextTacks[i];
          break;
        };
      };
    });
  });
&lt;/script&gt;</code></pre>
    <p>그런 다음 이전 예제의 로직을 사용하여 큐 포인트를 처리하는 데 사용할 수 있습니다. <code translate="No">tt</code>원하는 텍스트 트랙을 포함하는 변수.</p>
  </section>
  <section class="bcls-section video-cloud-only">
    <h2 id="Programmatic_cue_points">프로그래밍 방식 큐 포인트</h2>
    <p>프로그래밍 방식으로 큐 포인트를 추가 할 수 있습니다. 핵심 방법은 HTML5에서 비롯됩니다. <code translate="No">VTTCue</code>상호 작용. 다음 구문을 사용하여 큐 포인트를 만들 수 있습니다.</p>
    <pre>
<code class="language-javascript" translate="No">new VTTCue( startTime, endTime, text )</code></pre>
    <p>큐 포인트를 처리하는 로직은 이전 예제와 매우 유사하므로 위에서 사용 된 것과 다른 코드 만 자세히 설명합니다.</p>
    <ul>
      <li>
        <p>43,44 행 : 추가<code translate="No">textTrack</code>플레이어의<code translate="No">addRemoteTextTrack()</code>방법. 지정<code translate="No">kind</code>되려고<strong>메타 데이터</strong> , 및<code translate="No">label</code> ,이 경우<strong>시간 제한 큐 포인트</strong> .</p>
        <aside class="bcls-aside bcls-aside--information">참고: 원격 텍스트 트랙만 플레이어에서 제거할 수 있으므로 다음을 사용하는 것이 좋습니다. <a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#addRemoteTextTrack"> addRemoteTextTrack()</a>방법.</aside>
      </li>
      <li>
        <p>45-48 행 : 플레이어의 큐 포인트를 사용하여 두 개의 큐 포인트를 만들기 전에 10 밀리 초<code translate="No">addCue()</code>방법. 큐 포인트는 HTML5를 사용하여 인스턴스화됩니다. <code translate="No">VTTCue()</code>건설자.</p>
        <aside class="bcls-aside bcls-aside--tip">Safari 및 iOS의 경우 큐 포인트를 추가하기 전에 지연해야 합니다. 그렇지 않으면 큐 포인트가 추가되지 않습니다. 이는 Brightcove Player가 Safari 브라우저 및 iOS에서 기본 비동기 트랙을 사용하기 때문입니다.</aside>
      </li>
      <li>22 행 : <code translate="No">addtrack</code>이벤트를 수신합니다.</li>
      <li>23호선: 플레이어와 관련된 모든 텍스트 트랙을 검색합니다.</li>
      <li>24번 라인: 설정<code translate="No">attLength</code>텍스트 트랙 수에 따라 달라집니다. 이 값은 다음 코드 세그먼트의 루프에서 사용됩니다.</li>
      <li>25-30 행 : 각 텍스트 트랙을 반복하여<code translate="No">label</code>올바른 값과 같아야합니다. 발견되면 현재 텍스트 트랙을 변수에 할당하고 루프를 종료합니다.</li>
    </ul>
    <aside class="bcls-aside bcls-aside--tip">참고: 다음에 나오는 학습 샘플 코드 외부에서 큐 포인트는 주요 큐 포인트 정보가 포함된 일부 데이터 구조를 반복하여 생성될 가능성이 매우 높습니다.</aside>
    <pre class="line-numbers" data-start="1">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
  data-video-id="4607746980001"
  data-account="1507807800001"
  data-player="default"
  data-embed="default"
  class="video-js"
  width="640" height="360"
  controls&gt;&lt;/video-js&gt;

&lt;script src="https://players.brightcove.net/1507807800001/default_default/index.min.js"&gt;&lt;/script&gt;

&lt;p id="insertionPoint"&gt;&lt;/p&gt;

&lt;script type="text/javascript"&gt;
  videojs.getPlayer("myPlayerID").ready(function () {
    var myPlayer = this,
      textTrack = [],
      allTextTacks,
      attLength,
      tt;
    myPlayer.one("loadedmetadata", function () {
      myPlayer.textTracks().addEventListener('addtrack', function () {
        allTextTacks = myPlayer.textTracks();
        attLength = allTextTacks.length;
        for (var i = 0; i &lt; attLength; i++) {
          if (allTextTacks[i].label === 'Timed Cue Point') {
            tt = allTextTacks[i];
            break;
          }
        }
        tt.oncuechange = function () {
          if (tt.activeCues[0] !== undefined) {
            var dynamicHTML = "id: " + tt.activeCues[0].id + ", ";
            dynamicHTML += "text: &lt;strong&gt;" + tt.activeCues[0].text + "&lt;/strong&gt;, ";
            dynamicHTML += "startTime: &lt;strong&gt;" + tt.activeCues[0].startTime + "&lt;/strong&gt;,  ";
            dynamicHTML += "endTime: &lt;strong&gt;" + tt.activeCues[0].endTime + "&lt;/strong&gt;";
            document.getElementById("insertionPoint").innerHTML += dynamicHTML + "&lt;br/&gt;&lt;br/&gt;";
          } else {
            document.getElementById("insertionPoint").innerHTML += "Cue point duration over" + "&lt;br/&gt;&lt;br/&gt;";
          }
        }; //end oncuechange
      }); // end playing
      textTrack = myPlayer.addRemoteTextTrack({kind: 'metadata', label: 'Timed Cue Point', mode: 'hidden'}, false);
      textTrack.track.mode = 'hidden';
      setTimeout(function(){
        textTrack.track.addCue(new window.VTTCue(2, 5, 'cue point 1 text'));
        textTrack.track.addCue(new window.VTTCue(10, 15, 'cue point 2 text'));
      }, 10);
    }); //end on loadedmetadata
  }); //end ready
&lt;/script&gt;</code></pre>
    <p>코드는 다음 스크린 샷과 같이 출력을 생성합니다. 참고<strong>신분증</strong>값은 사용할 때 값이 제공되지 않습니다. <code translate="No">VTTCue()</code>생성자 메서드.</p>
    <figure class="bcls-figure"><img class="bcls-image" alt="dynamic cue points" src="/assets/images/general/cue-points-dynamic.png" /></figure>
  </section>
  <section class="bcls-section">
    <h2 id="ID3_and_media_cue_points">ID3 및 미디어 큐 포인트</h2>
    <p>미디어와 관련된 ID3 큐 포인트 또는 미디어 큐 포인트가있는 경우 다음을 사용하여 처리 할 수 있습니다. <code translate="No">id3CuePointsTrack()</code>과<code translate="No">mediaCuePointsTrack()</code>행동 양식. 예를 들어 큐 포인트 변경을 수신하려면 다음을 사용합니다.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function () {
  var myPlayer = this;
  myPlayer.one("canplay", function () {
    <span class="bcls-highlight">myPlayer.id3CuePointsTrack().on('cuechange', function () {
      // process cue point here
    });</span>
  });
});</code></pre>
    <h3>ID3 세부 사항</h3>
    <p>다음은 ID3 큐 포인트 사용에 대한 자세한 정보를 제공합니다.</p>
    <ul>
      <li>ID3 태그는 시간이 지정된 메타 데이터를 스트림에 삽입하는 데 사용할 수 있습니다.</li>
      <li>세그먼트 당 여러 ID3 프레임을 가질 수 있습니다.</li>
      <li>Brightcove Player는 ID3 큐 포인트를 구문 분석하고 앞서 언급 한<code translate="No">id3CuePointsTrack()</code>방법.</li>
      <li>기다리는 것이 가장 좋습니다. <code translate="No">canplay</code>이벤트 또는 트랙에 액세스하려고 할 때 트랙을 검색 할 수 없을 가능성이 있습니다.</li>
      <li>태그 당 여러 프레임이 지원됩니다.</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="Known_issues">알려진 문제</h2>
    <ul>
      <li>Safari에서 종료 시간이 시작 시간과 같으면 큐 포인트가 트리거되지 않습니다. 따라서 Safari 호환성이 문제인 경우 큐 포인트의 지속 시간이 0보다 길어야합니다.</li>
    </ul>
  </section>
</article>
<script src="https://players.brightcove.net/1752604059001/VkIrj2aFx_default/index.min.js"></script><script src="https://players.brightcove.net/3676484087001/4f14e962-a11f-441f-8c00-0c89b8edb0a6_default/index.min.js"></script><script>
  videojs.getPlayer('myPlayerID').ready(function() { var 플레이어 = this; player.one("loadedmetadata",function(){ var tt = player.textTracks()[0]; tt.oncuechange = function( ) { if(tt.activeCues[0] !== 정의되지 않음){ var dynamicHTML = "id: <strong> " + tt.activeCues[0].id + ", "; dynamicHTML += "텍스트: <strong> " + tt.activeCues[0].text + ", "; dynamicHTML += "시작 시간: <strong> " + tt.activeCues[0].startTime + ", "; dynamicHTML += "endTime: <strong> " + tt.activeCues[0].endTime + ""; document.getElementById("insertionPoint").innerHTML += dynamicHTML + "<br/>"; } } //player.play(); player.muted(true); }); });
  </script><script>
  videojs.getPlayer('myPlayerID2').ready(function() { var myPlayer = this; myPlayer.one("loadedmetadata",function(){ var trackIndex = myPlayer.textTracks().length -1, var tt = myPlayer. textTracks()[trackIndex]; tt.oncuechange = function() { if(tt.activeCues[0] !== 정의되지 않음){ console.log('tt.activeCues[0]',tt.activeCues[0]); var dynamicHTML = "아이디: <strong> " + tt.activeCues[0].id + ", "; dynamicHTML += "텍스트: <strong> " + tt.activeCues[0].text + ", "; dynamicHTML += "시작 시간: <strong> " + tt.activeCues[0].startTime + ", "; dynamicHTML += "endTime: <strong> " + tt.activeCues[0].endTime + ""; document.getElementById("insertionPoint2").innerHTML += dynamicHTML + "<br/><br/>"; jsonData = JSON.parse(tt.activeCues[0].text); document.getElementById("insertionPoint2").innerHTML += jsonData.title + ": " + jsonData.description + "<br/><br/>"; } else { document.getElementById("insertionPoint2").innerHTML += " <strong>큐 포인트 지속 시간 초과" + "<br/><br/>"; } } //oncuechange 종료 //myPlayer.play(); myPlayer.muted(true); }); //loadedmetadata 종료 }); //준비 완료
  </script><script>
  var myPlayer3, textTrack; videojs.getPlayer('myPlayerID3').ready(함수() { var myPlayer3 = this; myPlayer3.src({ "type": "video/mp4", "src": "//solutions.brightcove.com/bcls/assets/videos/Water-In-Motion.mp4" } ); textTrack = myPlayer3.addTextTrack('메타데이터', '시간 제한 큐 포인트'); textTrack.addCue(new window.VTTCue(2,4,'큐 포인트 1 텍스트')); textTrack.addCue(new window.VTTCue(6,8,'큐 포인트 2 텍스트')); textTrack.addCue(new window.VTTCue(10,11,'큐 포인트 3 텍스트')); textTrack.addCue(new window.VTTCue(15,20,'큐 포인트 4 텍스트 - LAST CUEPOINT')); var tt = myPlayer3.textTracks()[0]; tt.oncuechange = function() { if(tt.activeCues[0] !== undefined){ //var dynamicHTML = "id: " + tt.activeCues[0].id + ", "; var dynamicHTML = "텍스트: <strong> " + tt.activeCues[0].text + ", "; dynamicHTML += "시작 시간: <strong> " + tt.activeCues[0].startTime + ", "; dynamicHTML += "endTime: <strong> " + tt.activeCues[0].endTime + ""; document.getElementById("insertionPoint3").innerHTML += dynamicHTML + "<br/>"; } else { document.getElementById("insertionPoint3").innerHTML += "큐 포인트 지속 시간 초과" + "<br/><br/>"; } } //oncuechange 종료 }); //준비 완료
  </script>