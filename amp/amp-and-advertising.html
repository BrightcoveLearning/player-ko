
---
title: 'AMP 및 광고'
description: "이 주제에서는 AMP를 사용하는 Brightcove Player로 광고를 표시하는 방법을 배웁니다. 또한 Brightcove Player/AMP 구성에서 클라이언트 측 동의를 사용하는 방법도 배우게 됩니다."
parent: "amp"
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
    <summary>{{ page.description }}</summary>
    <section class="bcls-section">
        <h2 id="section-name">AMP 플레이어에서 광고 구현</h2>
        <p>프리 롤을 포함한 광고는 AMP에서 사용되는 플레이어에서 작동합니다. 광고 플러그인과 해당 구성은 플레이어의 구성에 포함되어야합니다. 광고 서버 호출에 기사 별 값을 포함해야하는 경우이 문서의 뒷부분에 설명 된대로 사용자 정의 데이터를 플레이어 플러그인으로 전달할 수 있습니다.</p>
        <p>AMP는 유효한 AMP 페이지에 추가 할 수있는 항목이 매우 엄격합니다. <a href="/amp/amp-using-video-cloud-video.html">비디오 클라우드 비디오를 사용하는 AMP</a>문서. 예를 들어, 추가하는 표준 관행을 사용할 수 없습니다. <code translate="No">id</code> ~로<code translate="No">amp-brightcove</code>태그를 사용한 다음<code translate="No">script</code>예를 들어 IMA3 플러그인을 구성하는 블록입니다.</p>
        <p>다시 말하지만, 광고는 Studio 또는 Player Management API를 사용하여 플레이어의 구성에서 구현되어야합니다.</p>
        <p>다음과 같은 광고 매크로를 활용하는 광고 구성 URL을 사용하려는 경우<code translate="No">{pageVariable.<span class="bcls-highlight">adId</span>}</code> , 플레이어의 구성을 변경해야합니다. 다음과 같은 맞춤 매개 변수를 사용할 수 있습니다.</p>
        <pre class="line-numbers">
  <code class="language-html" translate="No">data-param-ad-id="preonlybumper"</code></pre>
        <p>이 값을 광고 매크로에서 자동으로 사용할 수있는 것은 아닙니다. <code translate="No">{pageVariable.adId}</code> . 만들려면<code translate="No">ad-id/adId</code>광고 URL에 사용할 수있는 속성을 사용하려면 Brightcove Player의<a href="/general/player-configuration-guide.html#query_string_to_window"> query_string_to_window</a>구성 옵션. 이 옵션은 쿼리 문자열 매개 변수에서 전역 네임 스페이스 (창) 변수의 채우기를 제어합니다. 모든 쿼리 문자열 매개 변수를 전역 네임 스페이스에 추가하려면 플레이어 구성에 다음을 추가합니다.
            <pre class="line-numbers">
<code class="language-bash" translate="No">"query_string_to_window": {
  "target": "queryStringParams"
}</code></pre>
            <p>참고<code translate="no"> queryStringsParams</code> name은 매개변수가 저장될 "변수"이며 원하는 대로 이름을 변경할 수 있습니다.</p>
            <p>어떤 이유로 제한된 매개 변수 만 전역 네임 스페이스에 할당하려는 경우 그렇게 할 수 있습니다. 예를 들어, <code class="language-html" translate="No">data-param-<span class="bcls-highlight">ad-id</span>="..."</code>플러그인에서 사용할 수있는 경우 플레이어 구성에 다음을 추가합니다.</p>
            <pre class="line-numbers">
<code class="language-bash" translate="No">"query_string_to_window": {
  "globals": [
    "adId"
  ]
}</code></pre>
            <p>플레이어 구성 업데이트에 대한 구체적인 지침은<a href="https://apis.support.brightcove.com/player-management/references/reference.html#operation/UpdatePlayerConfiguration">플레이어 구성-플레이어 구성 업데이트</a>플레이어 관리 API 참조에서.</p>
    </section>
    <section class="bcls-section">
        <h2 id="section-name">AMP 동의 및 광고</h2>
        <p>AMP에서는 클라이언트 측 동의를 사용하여 사용자에게 온라인 경험을 추가로 제어 할 수 있습니다. AMP 페이지가 AMP 동의로 사용자 동의를 관리하고 있고 플레이어에서 광고를 사용하는 경우 해당 동의에 따라 플레이어의 광고 요청을 조정하는 것이 좋습니다. 이를 추가하여
            <pre><code class="language-javascript">data-block-on-consent = "_ till_responded"</code></pre>
            amp-brightcove 요소에 대한 속성입니다. 이로 인해 사용자가 동의를 수락하거나 거부 할 때까지 플레이어로드가 지연됩니다. 동의가 확인 된 이후 페이지에서 플레이어는 지연없이 정상적으로로드됩니다.</p>
        <aside class="bcls-aside bcls-aside--information">AMP 사용자 동의에 대한 자세한 내용은 AMP의<a href="https://amp.dev/documentation/examples/user-consent/client_side_user_consent_flow/">클라이언트 측 사용자 동의 흐름</a>문서.</aside>
        <h3>광고 구성</h3>
        <p>광고 및 AMP를 구현하는 가장 간단한 시나리오는 Google Ad Manager와 Brightcove Player의 표준 IMA 광고 통합을 사용하는 것입니다. <code translate="no"> npa=1</code>동의를 알 수 없거나 제공되지 않은 경우 광고 요청에 추가됩니다. 이렇게하려면</p>
            <pre><code class="language-javascript">"imaAddNpa": 참</code></pre>
            <p>플레이어의 AMP 지원 플러그인 옵션에 추가하면 다음과 같이 광고 서버 URL에 자동으로 추가됩니다.</p>
        <figure class="bcls-figure">
            <img class="bcls-image" src="/assets/images/amp/amp-ad-plugin-config.png" alt="plugin configuration">
        </figure>
        <p>광고 서버 URL에 대한 기타 변경의 경우 동의 상태가 3 개의 쿼리 매개 변수를 사용하여 플레이어의 iframe에 설정됩니다.</p>

        <ul>
            <li><code translate="no">ampInitialConsentState</code> : 동의 수락, 거부, 알 수 없음</li>
            <li><code translate="no">ampConsentSharedData</code> : 동의 공급 업체의 JSON 데이터 문자열</li>
            <li><code translate="no">ampInitialConsentValue</code> : 동의 공급 업체의 동의 문자열</li>
        </ul>

        <p>동의 상태는 AMP에 정의 된 정수입니다.</p>

        <ul>
            <li>충분한: 1</li>
            <li>부족 : 2</li>
            <li>UNKNOWN_NOT_REQUIRED : 3</li>
            <li>알 수 없는: 4</li>
        </ul>

        <p>플레이어 iframe의 쿼리 매개 변수를 간단한 자바 스크립트 변수로 사용할 수 있도록 플레이어 구성을 업데이트하려면 JSON 편집기의 플레이어 구성에 다음을 추가합니다.</p>
        <pre><code class="language-javascript">"query_string_to_window": {"target": "queryStringParams"}</code></pre>
        <p>도움이 필요하면 다음은 UI 스크린 샷입니다.
        </p>
        <figure class="bcls-figure">
            <img class="bcls-image" src="/assets/images/amp/amp-ad-json-editor.png" alt="JSON editor">
        </figure>
        <p>그런 다음 매크로를 사용하거나 severURL을 함수로 구성하여 광고 서버 요청에서 동의 쿼리 매개 변수를 사용할 수 있습니다.</p>
        <h4>매크로 예</h4>
        <pre><code class="language-javascript">"adserverURL": "https://ads.example.com/ad?consent= {pageVariable.queryStringParams.ampInitialConsentState} &amp;동의문자열= {pageVariable.queryStringParams.ampInitialConsentValue} "</code></pre>
        <h4>기능 예</h4>
        <p>다음을 사용하여 광고 서버 URL없이 플레이어를 구성합니다.</p>
        <pre><code class="language-javascript">videojs.registerPlugin('setAdUrl', function() { this.ima3.settings.serverUrl = function(callback) { if (window.queryStringParams.ampInitialConsentState === 1) { // Sufficient consent callback('https://ads.example.com/adwithconsent?string={pageVariable.queryStringParams.ampInitialConsentValue} '); } 또 다른{ // Use a different ad callback('https://ads.example.com/basicad'); } });</code></pre>


    </section>
</article>